<html>
<head>
<link href="https://fonts.googleapis.com/css?family=Baloo+Thambi|Montserrat+Alternates" rel="stylesheet">

<link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css" rel="stylesheet">
<link href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.5.1/animate.min.css" rel="stylesheet">

<script src="https://code.jquery.com/jquery-2.2.4.min.js"></script>

<style>
body {width:100%; background-repeat:no repeat;}
.weather-text {font-family:"Montserrat Alternates";  font-size: 50px;}
h2 {font-family:"Montserrat Alternates";}
.box-weather {  min-height: 300px;  margin:20%;  min-width: 100px;  border-radius: 2em;}
.disc {padding:0;}
.temptype {font-size:45px;  font-family:"Marcellus SC";  float:left;  outline-width: 0;}
.temp {font-family:"Montserrat Alternates";}
.temptype:focus{outline: none;}
.temptype:hover {color: #d2b48c;  cursor: pointer;}
.type {width:100%!important;}
.icon{clear:left;  text-align:left;}
.status{clear:left;  text-align:right;}
.humidity{text-align:left;  margin-top:-8%;}
</style>

<script>
	
$(document).ready(function(){   
    
  navigator.geolocation.getCurrentPosition(success); 
  

  var mes;
 
  var jsondata;
  
  function success(position) {
    var lon = position.coords.longitude;
    var lat = position.coords.latitude;
    mes = [lon,lat];
    jsondata = "https://cors-anywhere.herokuapp.com/http://api.openweathermap.org/data/2.5/weather?lat=" + mes[1] + "&lon=" + mes[0] + "&appid=77ffdf4236ef235a85def63187a9458e";
       
    $.getJSON(jsondata,function(weather) {
      //takeing the name of the city inside the html as well as the country
      $(".cityname").html(weather.sys.country+", "+weather.name);
      // temperature global variable in kelvin
      tmp = weather.main.temp;
      $(".temp").html((tmp-273.15).toFixed(2));
      $(".temptype").html("C");
      $(".temptype").on("click",function() {
        if(document.querySelector(".temptype").innerHTML=="C") {
          $(".temptype").html("F");
          $(".temp").html(((tmp*9/5)-459.67).toFixed(2));
        }else if($(".temptype").html("F")) {
          $(".temptype").html("C");
          $(".temp").html((tmp-273.15).toFixed(2));
        }
          
      });
      //giving variables to the icon status humidity and wind
      var iconstyle =weather.weather[0].icon;
      $(".icon").append("<img src='http://openweathermap.org/img/w/"+iconstyle+".png'>");
      var status =weather.weather[0].description;
      $(".status").append("<h2>"+status+":</h2>");
      var hum = weather.main.humidity;
      $(".humidity").append("<h2>"+hum+"%</h2>");
      var wind = weather.wind.speed;
      $(".wind-speed").append("<h2>"+wind+"m/s</h2>");
        
        
      switch (status) {
        case "clear sky":
        case "few clouds":
          if (iconstyle[2]==="d") {
            document.getElementById("weth").style.color = "#1E1C19";
            document.body.style.backgroundImage = "url('http://choosetosoar.net/wp-content/uploads/2014/07/Sky-rays-bg.jpg')";
            document.getElementById("weth").style.backgroundColor = "rgba(236,165,94,0.3)";
          }else if(iconstyle[2]==="n") {
            document.getElementById("weth").style.color = "#1C1B1B";
            document.body.style.backgroundImage = "url('http://www.walldevil.com/wallpapers/a57/sky-moon-night-star.jpg')";
            document.getElementById("weth").style.backgroundColor = "rgba(185,183,183,0.3)";
          }
          break;
        case "scattered clouds":
        case "broken clouds":
          if (iconstyle[2]==="d") {
            document.getElementById("weth").style.color = "#1E1C19";
            document.body.style.backgroundImage = "url('https://i.ytimg.com/vi/z2UDZMu2GLU/maxresdefault.jpg')";
            document.getElementById("weth").style.backgroundColor = "rgba(185,183,183,0.4)";
          }else if(iconstyle[2]==="n") {
            document.getElementById("weth").style.color = "#1C1B1B";
            document.body.style.backgroundImage = "url('http://orig04.deviantart.net/170c/f/2012/225/d/e/cloudy_sky_by_muggi93-d5ay7im.jpg')";
            document.getElementById("weth").style.backgroundColor = "rgba(185,183,183,0.3)";
          }
          break;
        case "shower rain":
        case "rain":
          document.getElementById("weth").style.color = "#1C1B1B";
          document.body.style.backgroundImage = "url('https://images2.alphacoders.com/180/180742.jpg')";
          document.getElementById("weth").style.backgroundColor = "rgba(176,183,218,0.5)";
          break;
            
        case "thunderstorm":
          document.getElementById("weth").style.color = "#1C1B1B";
          document.body.style.backgroundImage = "url('https://images5.alphacoders.com/467/467679.jpg')";
          document.getElementById("weth").style.backgroundColor = "rgba(185,183,183,0.3)";
          break;
        case "snow":
          if (iconstyle[2]==="d") {
            document.getElementById("weth").style.color = "#1C1B1B";
            document.body.style.backgroundImage = "url('https://edenhills.files.wordpress.com/2010/12/dsc_0160.jpg')";
            document.getElementById("weth").style.backgroundColor = "rgba(185,183,183,0.6)";
          }
          else if(iconstyle[2]==="n") {
            document.getElementById("weth").style.color = "#1C1B1B";
            document.body.style.backgroundImage = "url('http://img03.deviantart.net/06c1/i/2005/022/7/4/snow_falling_by_anotherdeadjuliet.jpg')";
            document.getElementById("weth").style.backgroundColor = "rgba(185,183,183,0.6)";
          }
          break;
        case "mist":
          if (iconstyle[2]==="d") {
            document.getElementById("weth").style.color = "#1C1B1B";
            document.body.style.backgroundImage = "url('http://randomwallpapers.net/morning-mist-waterfall-cool-2560x1440-wallpaper365821.jpg')";
            document.getElementById("weth").style.backgroundColor = "rgba(236,165,94,0.3)";
          }
          else if(iconstyle[2]==="n") {
            document.getElementById("weth").style.color = "#1C1B1B";
            document.body.style.backgroundImage = "url('http://www.walldevil.com/wallpapers/w11/night-moon-stars-forests-trees-mist-cities.jpg')";
            document.getElementById("weth").style.backgroundColor = "rgba(185,183,183,0.3)";
          }
          break;
        default:
          document.getElementById("weth").style.color = "#1C1B1B";
          document.body.style.backgroundColor ="orange";
          document.getElementById("weth").style.backgroundColor = "rgba(185,183,183,0.8)";
          break;
      }     
    });
  }
});

</script>

</head>

<body id = "body">
<div class = "container">
<div class = "box-weather text-center" id = "weth">
<h1 class = "weather-text">Current Weather</h1>
<h2>in</h2>
<h2 class = "cityname"></h2>
<div class = "weather">
<div class = "row">
<div class = "col-xs-6">
<h1 class = "temp text-right"></h1>
<div class = "status">
</div>
<h2 class = "text-right">Humidity:</h2>
<h2 class = "text-right">Wind Speed:</h2>
</div>
<div class = "col-xs-6">
<div class = "type">
<h1 class = "temptype text-left"></h1>
<div class = "icon"></div>
<div class = "humidity"></div>
<div class = "wind-speed text-left"></div>
</div>
</div>  
</div>
</div>
</div>
</div>
</body>
</html>
   